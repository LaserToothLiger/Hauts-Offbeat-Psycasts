<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  
  <AbilityDef ParentName="PsycastBase">
    <defName>HVP_PsyfocusTransfer</defName>
    <label>psyfocus transfer</label>
    <description>Transfer up to 50% psyfocus from one psycaster to any psycaster other than oneself. The donor's loss is instant, while the recipient gains the psyfocus over a brief period.\n\nMultiple casts on the same recipient increase the amount of psyfocus the recipient will gain, but not the rate.</description>
    <level>7</level>
    <iconPath>PsycastAbilities_PlaceholderIcons/HVP_PsyfocusTransfer</iconPath>
    <writeCombatLog>True</writeCombatLog>
    <hostile>true</hostile>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <displayGizmoWhileUndrafted>True</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>False</disableGizmoWhileUndrafted>
    <statBases>
      <Ability_EntropyGain>90</Ability_EntropyGain>
    </statBases>
    <verbProperties>
      <warmupTime>1</warmupTime>
      <range>19.9</range>
      <targetParams>
        <canTargetSelf>True</canTargetSelf>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="HOP_CoolerPsycasts.CompProperties_AbilityTransferPsyfocus">
        <compClass>HOP_CoolerPsycasts.CompAbilityEffect_TransferPsyfocus</compClass>
        <psychic>True</psychic>
        <goodwillImpact>-45</goodwillImpact>
        <destination>Selected</destination>
        <requiresLineOfSight>True</requiresLineOfSight>
        <range>19.9</range>
        <clamorType>Ability</clamorType>
        <clamorRadius>10</clamorRadius>
        <destClamorType>Ability</destClamorType>
        <destClamorRadius>10</destClamorRadius>
		<hediffToSelf>HVP_TransferredPsyfocus</hediffToSelf>
		<maxPsyfocusStolen>0.5</maxPsyfocusStolen>
		<maxPsyfocusReceived>0.5</maxPsyfocusReceived>
		<severityPerStolenPsyfocus>2</severityPerStolenPsyfocus><!--you'd get 2 hours per 100% psyfocus stolen, since the hediff's severity depletes by 1 per hour-->
      </li>
      <li Class="CompProperties_AbilityFleckOnTarget">
        <fleckDef>PsycastPsychicEffect</fleckDef>
      </li>
      <li Class="CoolPsycasts.CompProperties_AbilityDestroyFactionRelations">
	    <unlessHediff>CoolPsycasts_PsychicSilencer</unlessHediff>
	  </li>
	  <li Class = "CoolPsycasts.CompProperties_AbilityCauseArchotechActivity">
        <activityOffset>75</activityOffset>
		<stopAtActivity>9999</stopAtActivity>
      </li>
    </comps>
  </AbilityDef>
  
  
  <!--level 8-->
  <AbilityDef ParentName="PsycastBase">
    <defName>HVP_MarkingPulse</defName>
    <label>marking pulse</label>
    <description>Distort the psychic signatures of everyone around the target point, maximizing attack accuracy against them.</description>
    <level>8</level>
    <iconPath>PsycastAbilities_PlaceholderIcons/HVP_Targetzone</iconPath>
    <writeCombatLog>True</writeCombatLog>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <statBases>
      <Ability_PsyfocusCost>0.055</Ability_PsyfocusCost>
      <Ability_EntropyGain>60</Ability_EntropyGain>
      <Ability_Duration>30</Ability_Duration>
      <Ability_EffectRadius>3.9</Ability_EffectRadius>
    </statBases>
    <verbProperties>
      <warmupTime>1</warmupTime>
      <range>24.9</range>
      <targetParams>
        <canTargetSelf>True</canTargetSelf>
        <canTargetAnimals>True</canTargetAnimals>
        <canTargetLocations>True</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class = "CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>HVP_MarkingDebuff</hediffDef>
        <onlyBrain>True</onlyBrain>
        <psychic>True</psychic>
        <goodwillImpact>-15</goodwillImpact>
        <applyGoodwillImpactToLodgers>False</applyGoodwillImpactToLodgers>
      </li>
      <li Class="CompProperties_AbilityFleckOnTarget">
        <fleckDef>PsycastPsychicEffect</fleckDef>
      </li>
      <li Class="CoolPsycasts.CompProperties_AbilityDestroyFactionRelations">
	    <unlessHediff>CoolPsycasts_PsychicSilencer</unlessHediff>
	  </li>
	  <li Class = "CoolPsycasts.CompProperties_AbilityCauseArchotechActivity">
        <activityOffset>100</activityOffset>
		<stopAtActivity>9999</stopAtActivity>
      </li>
    </comps>
  </AbilityDef>
  <AbilityDef ParentName="HVP_PsycastBaseCall">
    <defName>HVP_SquadronCall</defName>
    <label>squadron call</label>
    <description>Summon rapid-response drop troopers from an orbital barge to the targeted location. These troopers are under the caster's control and will disappear after 6 hours or when downed. They may be slain without consequence.</description>
    <level>8</level>
    <iconPath>PsycastAbilities_PlaceholderIcons/HVP_SquadronCall</iconPath>
    <hostile>false</hostile>
    <canUseAoeToGetTargets>False</canUseAoeToGetTargets>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <displayGizmoWhileUndrafted>True</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>False</disableGizmoWhileUndrafted>
    <statBases>
      <Ability_PsyfocusCost>0.2</Ability_PsyfocusCost>
      <Ability_EntropyGain>110</Ability_EntropyGain>
      <Ability_Duration>250</Ability_Duration>
    </statBases>
    <verbProperties>
      <warmupTime>1</warmupTime>
      <range>39.9</range>
      <targetParams>
        <canTargetPawns>False</canTargetPawns>
        <canTargetLocations>True</canTargetLocations>
      </targetParams>
	  <useableInPocketMaps>false</useableInPocketMaps>
    </verbProperties>
    <comps>
      <li Class="HOP_CoolerPsycasts.CompProperties_AbilityDropSquad">
        <compClass>HOP_CoolerPsycasts.CompAbilityEffect_DropSquad</compClass>
		<pawnKinds>
		  <li>AncientSoldier</li>
		  <li>Empire_Fighter_Janissary</li>
		  <li>Empire_Fighter_Champion</li>
		  <li>Empire_Fighter_Cataphract</li>
		  <li MayRequire="OskarPotocki.VFE.Empire">VFEE_Deserter</li>
		</pawnKinds>
		<podPerStatCurve>
		  <points>
            <li>(0, 1)</li>
            <li>(1, 4)</li>
            <li>(2.5, 9)</li>
            <li>(6, 15)</li>
            <li>(12, 20)</li>
            <li>(20, 25)</li>
          </points>
		</podPerStatCurve>
		<statScalar>PsychicSensitivity</statScalar>
		<giveTraitToPassengers>HVP_Squaddie</giveTraitToPassengers>
      </li>
      <li Class="CoolPsycasts.CompProperties_AbilityDestroyFactionRelations">
	    <unlessHediff>CoolPsycasts_PsychicSilencer</unlessHediff>
	  </li>
	  <li Class = "CoolPsycasts.CompProperties_AbilityCauseArchotechActivity">
        <activityOffset>150</activityOffset>
		<stopAtActivity>9999</stopAtActivity>
      </li>
    </comps>
  </AbilityDef>
  
  <!--level 9-->
  <AbilityDef ParentName="HVP_PsycastBaseLink">
    <defName>HVP_TornadoLink</defName>
    <label>tornado link</label>
    <description>Use an alterable sequence of microscopic skipgates in the atmosphere to create a tornado at the target point. The tornado lasts for at least three hours, or indefinitely longer if the caster can maintain focus and remain nearby. While the link is maintained, the tornado remains in place and can be directed to a new location by subsequent recasts; otherwise, it wanders like a natural tornado.\n\nCosts 5 neural heat per second.</description>
    <level>9</level>
    <iconPath>PsycastAbilities_PlaceholderIcons/HVP_TornadoLink</iconPath>
    <canUseAoeToGetTargets>False</canUseAoeToGetTargets>
    <hostile>true</hostile>
    <casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
    <statBases>
      <Ability_EntropyGain>40</Ability_EntropyGain>
      <Ability_PsyfocusCost>0.06</Ability_PsyfocusCost>
      <Ability_EffectRadius>10</Ability_EffectRadius>
      <Ability_Duration>125</Ability_Duration>
    </statBases>
    <verbProperties>
      <warmupTime>1</warmupTime>
      <range>44.9</range>
      <useableInVacuum>false</useableInVacuum>
      <targetParams>
        <canTargetPawns>False</canTargetPawns>
        <canTargetLocations>True</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="HOP_CoolerPsycasts.CompProperties_AbilitySpawnLinkedObject">
        <thingDef>HVP_LinkedTornado</thingDef>
        <allowOnBuildings>True</allowOnBuildings>
		<linkHediff>HVP_HiddenTornadoMaintainer</linkHediff>
      </li>
      <li Class="CoolPsycasts.CompProperties_AbilityDestroyFactionRelations">
	    <unlessHediff>CoolPsycasts_PsychicSilencer</unlessHediff>
	  </li>
	  <li Class = "CoolPsycasts.CompProperties_AbilityCauseArchotechActivity">
        <activityOffset>200</activityOffset>
		<stopAtActivity>9999</stopAtActivity>
      </li>
    </comps>
  </AbilityDef>
  <AbilityDef ParentName="WordOfBase">
    <defName>HVP_WordOfBlessing</defName>
    <label>word of blessing</label>
    <description>Speak a litany of flesh-warping archotechnic words to alter the cellular makeup of the target. This will grant a permanent buff of the target's choice. No creature may have more than one blessing at a time; choosing a new one replaces the previous one.</description>
    <level>9</level>
    <iconPath>PsycastAbilities_PlaceholderIcons/HVP_WordOfBlessing</iconPath>
    <hostile>false</hostile>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <statBases>
      <Ability_PsyfocusCost>0.8</Ability_PsyfocusCost>
    </statBases>
    <verbProperties>
      <warmupTime>2</warmupTime>
      <targetParams>
        <canTargetSelf>True</canTargetSelf>
        <canTargetAnimals>True</canTargetAnimals>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>HVP_WordOfBlessingSelf</hediffDef>
        <psychic>True</psychic>
      </li>
      <li Class="CompProperties_AbilitySocialInteraction">
        <interactionDef>HVP_WordOfBlessing</interactionDef>
      </li>
      <li Class="CoolPsycasts.CompProperties_AbilityDestroyFactionRelations">
	    <unlessHediff>CoolPsycasts_PsychicSilencer</unlessHediff>
	  </li>
	  <li Class = "CoolPsycasts.CompProperties_AbilityCauseArchotechActivity">
        <activityOffset>50</activityOffset>
		<stopAtActivity>9999</stopAtActivity>
      </li>
    </comps>
  </AbilityDef>
  
  <!--level 10-->

  <AbilityDef ParentName="PsycastBase">
    <defName>HVP_Voidquake</defName>
    <label>voidquake</label>
    <description>Tear open a brief, localized breach between reality and the Void. Mechanoids will be permanently damaged and living creatures will flee in fear - unless they are within the safe zone. The sunlight itself will dim briefly. Casting this takes 12 seconds of meditation, and afterwards, the caster will go into a five-day psychic coma.\n\nUnlike a neuroquake, the effects of a voidquake leave no lasting repercussions on the psyche and do not extend further across the world, so it does not worsen diplomatic relations with other factions.</description>
    <level>10</level>
    <iconPath>PsycastAbilities_PlaceholderIcons/HVP_Datashock</iconPath>
    <hotKey>Misc12</hotKey>
    <jobDef>CastAbilityOnThingUninterruptible</jobDef>
    <targetRequired>False</targetRequired>
    <canUseAoeToGetTargets>False</canUseAoeToGetTargets>
    <showPsycastEffects>False</showPsycastEffects>
    <showCastingProgressBar>True</showCastingProgressBar>
    <warmupMote>Mote_WarmupNeuroquake</warmupMote>
    <warmupStartSound>Psycast_Neuroquake_CastStart</warmupStartSound>
    <warmupSound>Psycast_Neuroquake_CastLoop</warmupSound>
    <warmupPreEndSound>Psycast_Neuroquake_CastEnd</warmupPreEndSound>
    <warmupPreEndSoundSeconds>5</warmupPreEndSoundSeconds>
    <hostile>false</hostile>
    <statBases>
      <Ability_PsyfocusCost>0.7</Ability_PsyfocusCost>
      <Ability_EffectRadius>12.9</Ability_EffectRadius>
      <Ability_Duration>4800</Ability_Duration>
    </statBases>
    <verbProperties>
      <warmupTime>12</warmupTime>
      <range>12.9</range>
      <drawAimPie>False</drawAimPie>
      <requireLineOfSight>False</requireLineOfSight>
      <targetParams>
        <canTargetSelf>True</canTargetSelf>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="HOP_CoolerPsycasts.CompProperties_AbilityVoidquake">
        <screenShakeIntensity>2</screenShakeIntensity>
		<incidentDef>Eclipse</incidentDef>
		<mentalState>PanicFlee</mentalState>
        <hediffMechs>HVP_VoidquakeMalus</hediffMechs>
        <hediffEntities>HVP_VoidquakeBonus</hediffEntities>
      </li>
      <li Class="CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>PsychicComa</hediffDef>
        <onlyApplyToSelf>True</onlyApplyToSelf>
      </li>
      <li Class="CompProperties_AbilityFleckOnTarget">
        <fleckDef>PsychicApplyNeuroquake</fleckDef>
        <sound>Psycast_Neuroquake_Effect</sound>
      </li>
      <li Class="CoolPsycasts.CompProperties_AbilityDestroyFactionRelations">
	    <unlessHediff>CoolPsycasts_PsychicSilencer</unlessHediff>
	  </li>
	  <li Class = "CoolPsycasts.CompProperties_AbilityCauseArchotechActivity">
        <activityOffset>500</activityOffset>
		<stopAtActivity>9999</stopAtActivity>
      </li>
    </comps>
  </AbilityDef>
  
</Defs>